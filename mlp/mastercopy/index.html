<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Andrei Gudkov">
<title>Explaining machine learning pitfalls to managers</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,video{display:inline-block}audio:not([controls]){display:none;height:0}[hidden],template{display:none}script{display:none !important}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}a{background:transparent}a:focus{outline:thin dotted}a:active,a:hover{outline:0}h1{font-size:2em;margin:.67em 0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}mark{background:#ff0;color:#000}code,kbd,pre,samp{font-family:monospace,serif;font-size:1em}pre{white-space:pre-wrap}q{quotes:"\201C" "\201D" "\2018" "\2019"}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:0}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}button,input{line-height:normal}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}*,*::before,*::after{box-sizing:border-box;margin:0}body{font-family:Helvetica,Arial,sans-serif;font-size:16px;color:#222;line-height:1.5;max-width:55em;margin:0 auto}#content,#footnotes{padding-left:.5em;padding-right:.5em}strong{font-weight:bold}em{font-style:italic}:not(pre)>code{font-family:Courier,monospace;line-height:1.0}a{color:#0061c5;text-decoration:none}a:hover{text-decoration:underline}hr{border-width:0 0 1px 0;border-style:solid;border-color:#678}ul,ol{list-style-position:outside;padding-left:0;margin-left:2em}ul li ul,ul li ol,ol li ul,ol li ol{margin-left:1.414em}ul>li{list-style-type:square;font-size:80%}ul>li>*{font-size:125%}ol>li{font-weight:bold}ol>li>*{font-weight:normal}ol.arabic{list-style-type:decimal}ol.decimal{list-style-type:decimal-leading-zero}ol.loweralpha{list-style-type:lower-alpha}ol.upperalpha{list-style-type:upper-alpha}ol.lowerroman{list-style-type:lower-roman}ol.upperroman{list-style-type:upper-roman}ol.lowergreek{list-style-type:lower-greek}.dlist dt{color:#325d72;font-weight:bold}.dlist dt:not(:first-child){margin-top:1em}.dlist dd{margin-left:2em}td.hdlist1{color:#325d72;padding-right:.5em;vertical-align:top}td.hdlist2{padding-bottom:.5em}h1{font-size:28px;font-weight:normal;letter-spacing:-1px;color:white;background-color:#325d72;text-align:center;margin:0 0 .5em 0;padding:.05em .5em}@media print{h1{color:#325d72;background-color:white;font-weight:bold}}h1::after{content:':';width:0;overflow:hidden;display:inline-block;vertical-align:middle}.author{color:#325d72}.email::before{content:"<";color:#325d72}.email::after{content:">";color:#325d72}.author+br,.email+br{display:none}#author{padding-left:.5em}#toc{margin:1em 0 2em 0;padding-left:.5em}#toctitle{font-size:19px;font-weight:bold;color:#325d72;margin:.5em 0}#toc>ul{line-height:1.4;font-size:15px;margin:0 0 0 .5em}#toc ul li{list-style-type:none}#toc li{margin:0}.big{font-size:120%}.small{font-size:75%}.underline{text-decoration:underline}.overline{text-decoration:overline}.line-through{text-decoration:line-through}.aqua{color:#00bfbf}.aqua-background{background-color:#00fafa;border-radius:2px;padding:0 3px}.black{color:"black"}.black-background{background-color:"black";border-radius:2px;padding:0 3px}.blue{color:#0000bf}.blue-background{background-color:#0000fa;border-radius:2px;padding:0 3px}.fuchsia{color:#bf00bf}.fuchsia-background{background-color:#fa00fa;border-radius:2px;padding:0 3px}.gray{color:#606060}.gray-background{background-color:#7d7d7d;border-radius:2px;padding:0 3px}.green{color:#006000}.green-background{background-color:#007d00;border-radius:2px;padding:0 3px}.lime{color:#00bf00}.lime-background{background-color:#00fa00;border-radius:2px;padding:0 3px}.maroon{color:#600000}.maroon-background{background-color:#7d0000;border-radius:2px;padding:0 3px}.navy{color:#000060}.navy-background{background-color:#00007d;border-radius:2px;padding:0 3px}.olive{color:#606000}.olive-background{background-color:#7d7d00;border-radius:2px;padding:0 3px}.purple{color:#600060}.purple-background{background-color:#7d007d;border-radius:2px;padding:0 3px}.red{color:#bf0000}.red-background{background-color:#fa0000;border-radius:2px;padding:0 3px}.silver{color:#909090}.silver-background{background-color:#bcbcbc;border-radius:2px;padding:0 3px}.teal{color:#006060}.teal-background{background-color:#007d7d;border-radius:2px;padding:0 3px}.white{color:#bfbfbf}.white-background{background-color:#fafafa;border-radius:2px;padding:0 3px}.yellow{color:#bfbf00}.yellow-background{background-color:#fafa00;border-radius:2px;padding:0 3px}table.tableblock{border:1px solid #91a7b3;margin-left:auto;margin-right:auto}table.tableblock>caption.title{text-align:left;margin-bottom:.5em}table.tableblock>colgroup>col{width:inherit !important}table.tableblock>tbody>tr>td{border-style:solid;border-color:#91a7b3;border-width:0 1px;padding:0 5px 2px 5px}table.tableblock>tbody>tr:nth-of-type(2n){background-color:#f3f5f7}p.tableblock{text-align:inherit}table.tableblock>thead>tr>td,table.tableblock>thead>tr>th,table.tableblock>tfoot>tr>td,table.tableblock>tfoot>tr>th{color:#325d72;font-weight:bold;line-height:1.35;padding:2px 5px;border:1px solid #91a7b3}table.tableblock>thead>tr>th,table.tableblock>thead>tr>td{border-bottom-width:2px}table.tableblock>tfoot>tr>th,table.tableblock>tfoot>tr>td{border-top-width:2px}th.halign-left,td.halign-left{text-align:left}th.halign-right,td.halign-right{text-align:right}th.halign-center,td.halign-center{text-align:center}th.valign-top,td.valign-top{vertical-align:top}th.valign-bottom,td.valign-bottom{vertical-align:bottom}th.valign-middle,td.valign-middle{vertical-align:middle}div.listingblock{padding:.5em;border-style:solid;border-color:#678;border-width:0 0 0 2px;background-color:#f3f5f7;overflow:auto}div.listingblock .title{text-align:right}div.listingblock pre{font-family:Menlo,Consolas,Monaco,"Lucida Console",monospace;font-size:87.5%;white-space:pre;background-color:#f3f5f7 !important;margin:0}div.listingblock td.linenos{border-right:1px solid #91a7b3;padding-right:.67em}div.listingblock table.pyhltable div.linenodiv{color:#678;text-align:right}div.listingblock table.pyhltable td.code{padding-left:.67em}div.imageblock>div.content>img{max-width:98%}.text-indent{padding-left:2em}img.inlinemath{image-rendering:optimizequality;margin-top:.5ex}h2,h3,h4{font-weight:normal;color:#325d72;margin:0}h2{font-size:27px;letter-spacing:-1px;border-bottom:1px solid #91a7b3}h3{font-size:24px;letter-spacing:-0.75px}h4{font-size:21px;letter-spacing:-0.5px}.title{color:#325d72;font-weight:bold}#footer{font-size:80%;color:white;background-color:#325d72}@media print{#footer{color:#325d72;background-color:white;font-weight:bold}}#footer-text{text-align:center;padding:.5em}#footer-badges{display:none}span.footnote{vertical-align:super;font-size:80%}#footnotes>hr{display:none}#footnotes::before{display:block;border-bottom:1px solid #678;margin:.5em 0;content:"Notes";font-size:19px;font-weight:bold;color:#325d72}#footnotes .footnote{margin-left:.5em;font-size:15px}hr:not(:first-child){margin-top:1.5em}hr:not(:last-child){margin-bottom:1.5em}.imageblock:not(:last-child),.listingblock:not(:last-child),.tableblock:not(:last-child){margin-bottom:1em}p+*{margin-top:1em}.paragraph+*{margin-top:1em}p+.ulist,p+.olist,p+.dlist,p+.hdlist,.paragraph+.ulist,.paragraph+.olist,.paragraph+.dlist,.paragraph+.hdlist,.paragraph+.listingblock{margin-top:.5em !important}li *+.ulist,li *+.olist,li *+.dlist,li *+.hdlist{margin-top:.1em !important}.title:not(:first-child){margin-top:1.5em}.content+.title{margin-top:.5em !important}.title+*{margin-top:1.5em}.title+p,.title+.paragraph,.title+.ulist,.title+.olist,.title+.dlist,.title+.hdlist{margin-top:.5em !important}.ulist:not(:last-child){margin-bottom:1em}.olist:not(:last-child){margin-bottom:1em}li:not(:first-child){margin-top:.1em}.dlist:not(:last-child){margin-bottom:1em}.dlist:not(:first-child){margin-top:1em}.sect3:not(:last-child){margin-bottom:18px}.sect3:not(:first-child){margin-top:18px}h4:not(:last-child){margin-bottom:9px}.sect2:not(:last-child){margin-bottom:22px}.sect2:not(:first-child){margin-top:22px}h3:not(:last-child){margin-bottom:11px}.sect1:not(:last-child){margin-bottom:40px}.sect1:not(:first-child){margin-top:40px}#preamble:not(:last-child){margin-bottom:40px}h2:not(:last-child){margin-bottom:13px}#header:not(:last-child),#content:not(:last-child),#footnotes:not(:last-child){margin-bottom:2em}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}
</style>
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments, .listingblock .pygments code { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article">
<div id="header">
<h1>Explaining machine learning pitfalls to managers</h1>
<div class="details">
<span id="author" class="author">Andrei Gudkov</span><br>
<span id="email" class="email"><a href="mailto:gudokk@gmail.com">gudokk@gmail.com</a></span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_no_dataset_pitfall">No dataset pitfall</a></li>
<li><a href="#_no_classification_error_allowed">No classification error allowed</a></li>
<li><a href="#_time_limits_restrict_model_quality">Time limits restrict model quality</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_no_dataset_pitfall">No dataset pitfall</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Machine learning is not about solving some random problem that looks commercially appealing.
It is all about finding a problem for which a <strong>good training dataset</strong> can be acquired.</p>
</div>
<div class="paragraph">
<p>For example, what is harder: speech recognition or OCR?
Both tasks look similar at first glance.
They both attempt to recognize sequence of words.
The only difference is that the first one targets audio stream,
while the second one&#8201;&#8212;&#8201;stream of glyphs.
And yet speech recognition is much harder.</p>
</div>
<div class="paragraph">
<p>The trouble is that it is difficult to build good dataset for speech recognition.
The only way to do this is to hire an army of native language speakers
and ask them to manually recognize text in a collection of audio files.
This process is extremely money- and time-consuming.
It can take half a year to build the very first dataset barely enough to be used for training,
and much longer to develop it into high-quality, representative dataset that
would include corner cases such as rare accents.</p>
</div>
<div class="paragraph">
<p>This problem is not so severe with OCR.
Training dataset for OCR can be automatically constructed without relying on manual labor.
The idea is to render sample text into image file and then distort it to represent
real-world scanned text: rotate it, blur, add noise, apply brightness gradient, etc.
Repeating this process with different texts and fonts allows to create dataset of decent
quality in fully automatic mode.
Of course, some actually scanned texts are required to make dataset representable,
but this is not a bottleneck for ML engineers and can be done later.</p>
</div>
<div class="paragraph">
<p>Machine learning problems can be roughly classified into the following tiers
depending on the source of the dataset: naturally existing datasets;
programmatically constructed datasets; manually created datasets.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="tiers.svg" alt="tiers" width="70%">
</div>
</div>
<div class="paragraph">
<p>Tasks with naturally existing datasets form the lowest tier.
For instance, the problem of detecting sex and age of a person by analyzing photo is exactly of this type.
Dataset for this problem can be constructed by scraping social network profiles.
Another problem of such type is predicting next word while user is typing text message,
provided that an archive of previously sent messages exists.
Similar problems are predicting geolocation of the user, stock price forecasting, and recommending movies.
Even when data already exists, problems in this category can pose significant challenge
because the data can be dirty or biased.
People do not always specify their true sex and age in profiles,
and recommender systems are prone to bias due to bubble effect.
Anyway, naturally existing dirty data is better than no data at all.</p>
</div>
<div class="paragraph">
<p>Second tier is formed by problems which do not have natural datasets,
but datasets can be constructed in automatic mode.
One of such problems&#8201;&#8212;&#8201;OCR&#8201;&#8212;&#8201;was described above.
Datasets for large number of other problems focused on image enhancement can be solved in similar manner,
including image colorization, deblurring or upscaling.
Dataset construction process consists of downloading a collection of originally good images
and then artificially morphing them, e.g. converting to black and white.
The goal of the ML model is to reconstruct the original image.
Datasets for other problems, such as audio denoising, can be constructed by mixing multiple samples.</p>
</div>
<div class="paragraph">
<p>The third and highest tier consists of problems which require manual construction of the dataset.
Speech recognition, adult content detection, search engine ranking&#8201;&#8212;&#8201;all these problems require data
to be manually labeled.
If a problem falls into this tier, it would take 2-10 times longer to solve it than
a "similar" problem from other tiers.
For example, British National Corpus, which is widely used for training language models,
was constructed in three years with input from multiple organizations.
It is doubtful that small company would be able to provide such resources.
Not only manual labeling is time-consuming but it also requires extra effort from ML engineer.
ML engineer has to assemble training dataset piece by piece knowing that
any data batch scheduled for labeling costs money.
Every new batch must increase overall representativeness of the dataset
or otherwise money will be wasted.
Selecting such batches is significantly harder than filtering dirty data (tier 1 problem)
or creating additional data mutators (tier 2).</p>
</div>
<div class="paragraph">
<p>When approached with a new ML project, the first question to ask is:
how hard will it be to create dataset?
People without technical background often forget about data.
In fact, more effort is spent on dataset construction than on fitting ML model.
Projects which have to rely on manual data labeling are particularly prone to incorrect expectations.
Think twice before committing to such projects.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_no_classification_error_allowed">No classification error allowed</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When building a classifier, only one type of error can be minimized.</p>
</div>
<div class="paragraph">
<p>This is an example of typical conversation between a manager and a tech lead:</p>
</div>
<div class="paragraph">
<p><em>Manager.</em> Hello, I have an idea that will earn us a fortune.</p>
</div>
<div class="paragraph">
<p><em>TechLead.</em> What is it?</p>
</div>
<div class="paragraph">
<p><em>Manager.</em> There are a lot of prospective customers who are willing
           to pay for a classifier that is able to mark images with explicit content.
           Forums, social networks, file hostings&#8201;&#8212;&#8201;actually all sorts of public web sites
           where people can upload photos.
           We will be the first who implement this classifier and will become rich.</p>
</div>
<div class="paragraph">
<p><em>TechLead.</em> Nope, we won&#8217;t be able to create such a classifier.</p>
</div>
<div class="paragraph">
<p><em>Manager.</em> What are you talking about?
           I do not see any offensive images in google image search.
           Surely they can do this, and so do we.</p>
</div>
<div class="paragraph">
<p>At this moment tech lead has to explain concepts of precision and recall to the manager.
It is possible to optimize classifier only for one type of error.
Either it will erroneously filter out some good images in addition to bad ones;
or it will allow some bad images to pass through.
But it is impossible to build a classifier that is free of both errors.
In another words, there is a knob in ML model that allows
to choose what error is more important.
Depending on how you treat "gray" zone, error will shift to the left or to the right.
The lower one error type, the higher the another one.
If the knob is set to middle position, nothing good will happen
because both error types will be higher than zero.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="knob.svg" alt="knob" width="60%">
</div>
</div>
<div class="paragraph">
<p>In the hypothetical classifier discussed between manager and tech lead
neither error is acceptable.
If classifier allows bad images through, then users will be afraid to visit
web site in public or allow children to use it.
And if it blocks upload of innocent images, users will be frustrated by not understanding what they did wrong.
Google, on the other hand, is not so constrained.
It can rotate ML knob to a position where all bad images are filtered out along with some good ones.
The web is huge.
Definitely it will be able to find other images which match query and also pass the classifier.
If the classifier even slightly complains about some image, then this image is removed and replaced with another,
absolutely innocent one.</p>
</div>
<div class="paragraph">
<p>Similarly, you may have noticed that a lot of signboards in the google street view are blurred
like if they were car plate numbers.
The reason is the same: ML knob is in the position where it correctly detects all true plate numbers
at the cost of misclassifying some ordinary signboards as plate numbers.</p>
</div>
<div class="paragraph">
<p>When dealing with spam, the situation is the opposite.
It is better to allow some spam messages through antispam filter rather than throwing away
important messages.
Only when classifier 99.999% sure that message is spam, it is filtered out.</p>
</div>
<div class="paragraph">
<p>Another example of this kind is an ads engine.
Suppose that classifier is able to use location information to predict that user&#8217;s car has just broken on the road.
Positive classification of some user instructs ads engine to promote nearby service centers and dealerships to this user.
It is not a big trouble to misclassify a user and therefore display irrelevant ads
if user stopped on the road for some random reason,
but it would be inexcusable to miss a click from a person who is really in need of such services.
Even if classifier is so bad that four out of five people are marked incorrectly,
ads should be displayed.</p>
</div>
<div class="paragraph">
<p>It should be noted that if neither of error types is acceptable, it is not the end of the world yet.
It just means that classifier can&#8217;t work in fully automatic mode, but only as a prefilter.
Final decision must be made by a real person.
In the original example about explicit content identification, classifier may be tuned to make
one of the following decisions: a) publish photo immediately if it is sure that photo is OK;
b) immediately reject photo and notify user if it is sure that photo is not OK;
c) add photo into the queue for manual review in case of uncertainty.
The trouble is that it may be prohibitively expensive to pay to reviewers.
However, if you manage to make people work for free (usually such people are proudly called "moderators"),
then it can work out.</p>
</div>
<div class="paragraph">
<p>Conclusion.
When building classifiers, important question to ask:
assuming that cumulative error will be 20%,
where would you prefer to rotate the knob to?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_time_limits_restrict_model_quality">Time limits restrict model quality</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Everybody even barely accustomed to machine learning knows that training is a slow process,
in particular in case of neural networks.
But not everybody realizes that training time is only a small nuisance.
The real problem is not the training time, it is running time of already trained model.</p>
</div>
<div class="paragraph">
<p>For example, imagine neural network that performs so-popular face morphing.
If it is applied to a still photo, then there are no hard time limits.
Users will patiently wait for a couple of seconds while their face is being morphed,
provided that in return they will get some nice visual effect.
However, if the same model is to be applied to realtime video stream
(e.g. you want to morph your face while running online video chat),
time constraints create a challenge.
Smartphones produce video streams of 30 frames per second, meaning that
model must process every single frame in under 33 milliseconds.
This limit is too strict for a model performing high-quality morphing.
As such, either the model must be simplified, or video resolution must be lowered,
or frame rate must be reduced.
Any such simplification reduces output quality.</p>
</div>
<div class="paragraph">
<p>Issues with performance are not unique to neural networks.
Old-school machine learning algorithms also may be affected.
For example, web search engines traditionally use ensembles of decision trees
to find top N relevant documents to display.
These models are computationally significantly cheaper than neural networks,
but the trouble is that to build a single result page, model must be applied
to thousands of candidate documents.
Only top N highestly ranked candidate documents are displayed.
Developers, in order to satisfy time limit, have to use various heuristics,
the most drastic one is dropping large portion of documents from ranking at all.
This is one of the reasons why search engines may display irrelevant results.
Relevant documents are actually present in search engine database,
but they were skipped by ranking engine because of the time limit.</p>
</div>
<div class="paragraph">
<p>Another commonly forgotten aspect is time required to preprocess "raw" features into
"model" features which can be fed to a model.
Raw features (e.g. pixels of the original 3264x2448 photo; or age, sex and salary history
in credit score computation) are rarely fed directly into the model.
They are typically preprocessed into higher-level features.
Different ML algorithms impose different restrictions and thus require different preprocessing steps
in order to make model work correctly.
In case of photo analysis, processing may include converting photo to black-and-white
and downscaling it to fixed dimensions 128x128.
These 16384 pixels are next used directly as input features of neural network.
In case of credit score computation preprocessing may consist of generating
feature combinations (Age × max(Age, 30) × log(CurrentSalary)),
computing statistics ("median of monthly credit payment over the course of last 15 years")
and more computationally intense steps like Principal Component Analysis.
This preprocessing takes time, which may even exceed time it takes to apply model.
Feature preprocessing is generally more expensive in old-school ML models compared to NN.
The latter imposes fewer restrictions, which is one of the reasons why NN became popular recently.
In all cases preprocessing step does exist and takes time.
Bad thing is that this time is not included in reports generated by model training frameworks.
Training frameworks work directly with "model" features, which are typically prepared beforehand and supplied in a CSV file.
When training is over, frameworks produce report that includes among other things time it takes
to apply model to a single sample: "test collection: 1200 samples; score 96.4%; 4 ms/sample".
This timing may be misleading since it doesn&#8217;t include preprocessing time, which is out of the scope of model training.
Therefore it is strongly recommended to perform separate test that will measure timings of end-to-end workflow.</p>
</div>
<div class="paragraph">
<p>Summarizing the above, below is the overall timing formula for computing single "logical" result.
Every component of this formula may dominate the others.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="math-5413851412a55122.svg" alt="\mathrm{NumberOfSamples} \times \left( \mathrm{FeaturesPreprocessingTime} + \mathrm{ModelRunningTime} \right)" width="60%">
</div>
</div>
<div class="paragraph">
<p>Following factors contribute to running time:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Complexity of preprocessing raw features</p>
</li>
<li>
<p>Number of features fed into model</p>
</li>
<li>
<p>Complexity of the model itself (number of layers and connections in NN;
number of trees and their depth in decision tree models, etc)</p>
</li>
<li>
<p>Number of samples that are fed into model to produce single "logical" result</p>
</li>
<li>
<p>Hardware where model will be run.
There is huge difference between running model on GTX 1080 video card,
general purpose Intel/AMD CPU, and smartphone ARM CPU.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you have tight time limits, then a lot of things have to be simplified,
therefore reducing model quality.
Be prepared for that.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-10-03 08:01:18 UTC
</div>
</div>
</body>
</html>